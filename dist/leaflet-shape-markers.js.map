{"version":3,"file":"leaflet-shape-markers.js","sources":["../package.json","../src/ShapeMarker.js","../src/CrossMarker.js","../src/XMarker.js","../src/SquareMarker.js","../src/DiamondMarker.js","../src/ShapeMarkers.js"],"sourcesContent":["{\n  \"name\": \"leaflet-shape-markers\",\n  \"description\": \"Shape markers of fixed size for point symbols\",\n  \"version\": \"1.0.7\",\n  \"author\": \"Rachel Nehmer <rnehmer@esri.com>\",\n  \"bugs\": {\n    \"url\": \"https://github.com/Esri/Leaflet.shapeMarkers/issues\"\n  },\n  \"contributors\": [\n    \"Rachel Nehmer <rnehmer@esri.com>\",\n    \"John Gravois <jgravois@esri.com>\"\n  ],\n  \"dependencies\": {\n    \"leaflet\": \"^1.0.0\"\n  },\n  \"devDependencies\": {\n    \"karma\": \"^0.12.24\",\n    \"karma-mocha\": \"^0.1.0\",\n    \"karma-chai-sinon\": \"^0.1.3\",\n    \"karma-coverage\": \"^0.5.3\",\n    \"karma-mocha-reporter\": \"^0.2.5\",\n    \"karma-phantomjs-launcher\": \"^0.2.0\",\n    \"karma-sourcemap-loader\": \"^0.3.5\",\n    \"semistandard\": \"^7.0.5\",\n    \"gh-release\": \"^2.0.0\",\n    \"mkdirp\": \"^0.5.1\",\n    \"rollup\": \"^0.25.4\",\n    \"rollup-plugin-json\": \"^2.0.0\",\n    \"rollup-plugin-node-resolve\": \"^1.4.0\",\n    \"rollup-plugin-uglify\": \"^0.3.1\",\n    \"uglify-js\": \"^2.4.23\",\n    \"watch\": \"^0.17.1\"\n  },\n  \"homepage\": \"http://github.com/Esri/Leaflet.shapeMarkers\",\n  \"module\": \"src/ShapeMarkers.js\",\n  \"jsnext:main\": \"src/ShapeMarkers.js\",\n  \"jspm\": {\n    \"registry\": \"npm\",\n    \"format\": \"es6\"\n  },\n  \"keywords\": [\n    \"Leaflet\",\n    \"GIS\",\n    \"Esri\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"main\": \"dist/leaflet-shape-markers.js\",\n  \"readmeFilename\": \"README.md\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:Esri/Leaflet.shapeMarkers.git\"\n  },\n  \"scripts\": {\n    \"prepublish\": \"npm run build\",\n    \"prebuild\": \"mkdirp dist\",\n    \"build\": \"rollup -c scripts/debug.js && rollup -c scripts/production.js\",\n    \"release\": \"./scripts/release.sh\",\n    \"lint\": \"semistandard src/*.js\",\n    \"pretest\": \"npm run build\",\n    \"start\": \"watch 'npm run build' src & http-server -p 5000 -c-1 -o\",\n    \"test\": \"npm run lint && karma start\"\n  }\n}\n","import L from 'leaflet';\n\nexport var ShapeMarker = L.Path.extend({\n\n  initialize: function (latlng, size, options) {\n    L.setOptions(this, options);\n    this._size = size;\n    this._latlng = L.latLng(latlng);\n    this._svgCanvasIncludes();\n  },\n\n  toGeoJSON: function () {\n    return L.GeoJSON.getFeature(this, {\n      type: 'Point',\n      coordinates: L.GeoJSON.latLngToCoords(this.getLatLng())\n    });\n  },\n\n  _svgCanvasIncludes: function () {\n    // implement in sub class\n  },\n\n  _project: function () {\n    this._point = this._map.latLngToLayerPoint(this._latlng);\n  },\n\n  _update: function () {\n    if (this._map) {\n      this._updatePath();\n    }\n  },\n\n  _updatePath: function () {\n    // implement in sub class\n  },\n\n  setLatLng: function (latlng) {\n    this._latlng = L.latLng(latlng);\n    this.redraw();\n    return this.fire('move', {latlng: this._latlng});\n  },\n\n  getLatLng: function () {\n    return this._latlng;\n  },\n\n  setSize: function (size) {\n    this._size = size;\n    return this.redraw();\n  },\n\n  getSize: function () {\n    return this._size;\n  },\n\n  // NOTE: Needed by the leaflet `Canvas` renderer for interactivity\n  // For more details please see https://github.com/boss-solutions/boss_maps/issues/200#issuecomment-1743215427\n  // and https://github.com/Esri/Leaflet.shapeMarkers/issues/26\n\t_containsPoint: function (p) {\n    if (p) {\n\t\t   return p.distanceTo(this._point) <= this.getSize() + this._clickTolerance();\n    }\n    return false;\n\t},\n\n  _updateBounds: function () {\n    // NOTE: there is no bounds to update so this is a dummy method to avoid errors\n    // For more details please see here https://github.com/Esri/esri-leaflet/issues/1368\n  }\n\n});\n","import L from 'leaflet';\nimport { ShapeMarker } from './ShapeMarker';\n\nexport var CrossMarker = ShapeMarker.extend({\n\n  initialize: function (latlng, size, options) {\n    ShapeMarker.prototype.initialize.call(this, latlng, size, options);\n  },\n\n  _updatePath: function () {\n    this._renderer._updateCrossMarker(this);\n  },\n\n  _svgCanvasIncludes: function () {\n    L.Canvas.include({\n      _updateCrossMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n        var ctx = this._ctx;\n\n        ctx.beginPath();\n        ctx.moveTo(latlng.x, latlng.y + offset);\n        ctx.lineTo(latlng.x, latlng.y - offset);\n        this._fillStroke(ctx, layer);\n\n        ctx.moveTo(latlng.x - offset, latlng.y);\n        ctx.lineTo(latlng.x + offset, latlng.y);\n        this._fillStroke(ctx, layer);\n      }\n    });\n\n    L.SVG.include({\n      _updateCrossMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n\n        if (L.Browser.vml) {\n          latlng._round();\n          offset = Math.round(offset);\n        }\n\n        var str = 'M' + latlng.x + ',' + (latlng.y + offset) +\n          'L' + latlng.x + ',' + (latlng.y - offset) +\n          'M' + (latlng.x - offset) + ',' + latlng.y +\n          'L' + (latlng.x + offset) + ',' + latlng.y;\n\n        this._setPath(layer, str);\n      }\n    });\n  }\n});\n\nexport var crossMarker = function (latlng, size, options) {\n  return new CrossMarker(latlng, size, options);\n};\n\nexport default crossMarker;\n","import L from 'leaflet';\nimport { ShapeMarker } from './ShapeMarker';\n\nexport var XMarker = ShapeMarker.extend({\n\n  initialize: function (latlng, size, options) {\n    ShapeMarker.prototype.initialize.call(this, latlng, size, options);\n  },\n\n  _updatePath: function () {\n    this._renderer._updateXMarker(this);\n  },\n\n  _svgCanvasIncludes: function () {\n    L.Canvas.include({\n      _updateXMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n        var ctx = this._ctx;\n\n        ctx.beginPath();\n\n        ctx.moveTo(latlng.x + offset, latlng.y + offset);\n        ctx.lineTo(latlng.x - offset, latlng.y - offset);\n        this._fillStroke(ctx, layer);\n      }\n    });\n\n    L.SVG.include({\n      _updateXMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n\n        if (L.Browser.vml) {\n          latlng._round();\n          offset = Math.round(offset);\n        }\n\n        var str = 'M' + (latlng.x + offset) + ',' + (latlng.y + offset) +\n          'L' + (latlng.x - offset) + ',' + (latlng.y - offset) +\n          'M' + (latlng.x - offset) + ',' + (latlng.y + offset) +\n          'L' + (latlng.x + offset) + ',' + (latlng.y - offset);\n\n        this._setPath(layer, str);\n      }\n    });\n  }\n});\n\nexport var xMarker = function (latlng, size, options) {\n  return new XMarker(latlng, size, options);\n};\n\nexport default xMarker;\n","import L from 'leaflet';\nimport { ShapeMarker } from './ShapeMarker';\n\nexport var SquareMarker = ShapeMarker.extend({\n  options: {\n    fill: true\n  },\n\n  initialize: function (latlng, size, options) {\n    ShapeMarker.prototype.initialize.call(this, latlng, size, options);\n  },\n\n  _updatePath: function () {\n    this._renderer._updateSquareMarker(this);\n  },\n\n  _svgCanvasIncludes: function () {\n    L.Canvas.include({\n      _updateSquareMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n        var ctx = this._ctx;\n\n        ctx.beginPath();\n\n        ctx.moveTo(latlng.x + offset, latlng.y + offset);\n        ctx.lineTo(latlng.x - offset, latlng.y + offset);\n        ctx.lineTo(latlng.x - offset, latlng.y - offset);\n        ctx.lineTo(latlng.x + offset, latlng.y - offset);\n\n        ctx.closePath();\n\n        this._fillStroke(ctx, layer);\n      }\n    });\n\n    L.SVG.include({\n      _updateSquareMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n\n        if (L.Browser.vml) {\n          latlng._round();\n          offset = Math.round(offset);\n        }\n\n        var str = 'M' + (latlng.x + offset) + ',' + (latlng.y + offset) +\n          'L' + (latlng.x - offset) + ',' + (latlng.y + offset) +\n          'L' + (latlng.x - offset) + ',' + (latlng.y - offset) +\n          'L' + (latlng.x + offset) + ',' + (latlng.y - offset);\n\n        str = str + (L.Browser.svg ? 'z' : 'x');\n\n        this._setPath(layer, str);\n      }\n    });\n  }\n});\n\nexport var squareMarker = function (latlng, size, options) {\n  return new SquareMarker(latlng, size, options);\n};\n\nexport default squareMarker;\n","import L from 'leaflet';\nimport { ShapeMarker } from './ShapeMarker';\n\nexport var DiamondMarker = ShapeMarker.extend({\n  options: {\n    fill: true\n  },\n\n  initialize: function (latlng, size, options) {\n    ShapeMarker.prototype.initialize.call(this, latlng, size, options);\n  },\n\n  _updatePath: function () {\n    this._renderer._updateDiamondMarker(this);\n  },\n\n  _svgCanvasIncludes: function () {\n    L.Canvas.include({\n      _updateDiamondMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n        var ctx = this._ctx;\n\n        ctx.beginPath();\n\n        ctx.moveTo(latlng.x, latlng.y + offset);\n        ctx.lineTo(latlng.x - offset, latlng.y);\n        ctx.lineTo(latlng.x, latlng.y - offset);\n        ctx.lineTo(latlng.x + offset, latlng.y);\n\n        ctx.closePath();\n\n        this._fillStroke(ctx, layer);\n      }\n    });\n\n    L.SVG.include({\n      _updateDiamondMarker: function (layer) {\n        var latlng = layer._point;\n        var offset = layer._size / 2.0;\n\n        if (L.Browser.vml) {\n          latlng._round();\n          offset = Math.round(offset);\n        }\n\n        var str = 'M' + latlng.x + ',' + (latlng.y + offset) +\n          'L' + (latlng.x - offset) + ',' + latlng.y +\n          'L' + latlng.x + ',' + (latlng.y - offset) +\n          'L' + (latlng.x + offset) + ',' + latlng.y;\n\n        str = str + (L.Browser.svg ? 'z' : 'x');\n\n        this._setPath(layer, str);\n      }\n    });\n  }\n});\n\nexport var diamondMarker = function (latlng, size, options) {\n  return new DiamondMarker(latlng, size, options);\n};\n\nexport default diamondMarker;\n","import packageInfo from '../package.json';\nvar version = packageInfo.version;\nexport { version as VERSION };\n\nexport { crossMarker } from './CrossMarker';\nexport { xMarker } from './XMarker';\nexport { squareMarker } from './SquareMarker';\nexport { diamondMarker } from './DiamondMarker';\n"],"names":["ShapeMarker","L","Path","extend","initialize","latlng","size","options","setOptions","this","_size","_latlng","latLng","_svgCanvasIncludes","toGeoJSON","GeoJSON","getFeature","type","coordinates","latLngToCoords","getLatLng","_project","_point","_map","latLngToLayerPoint","_update","_updatePath","setLatLng","redraw","fire","setSize","getSize","_containsPoint","p","distanceTo","_clickTolerance","_updateBounds","CrossMarker","prototype","call","_renderer","_updateCrossMarker","Canvas","include","layer","offset","ctx","_ctx","beginPath","moveTo","x","y","lineTo","_fillStroke","SVG","Browser","vml","_round","Math","round","str","_setPath","crossMarker","XMarker","_updateXMarker","xMarker","SquareMarker","fill","_updateSquareMarker","closePath","svg","squareMarker","DiamondMarker","_updateDiamondMarker","diamondMarker","version","packageInfo"],"mappings":"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"}